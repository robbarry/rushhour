{"id":"rushhour-44t","title":"Centralize game constants and configuration","description":"Create src/config/Theme.ts to store all magic numbers and colors:\n- Define Depth enum/object: DEPTH.BACKGROUND, DEPTH.ROAD, DEPTH.SHADOW, DEPTH.CAR, DEPTH.PARTICLES, DEPTH.UI\n- Define Palette object with all Cold Night hex codes\n- Define Dimensions object: road widths, car sizes, intersection radius, etc.\n- Refactor existing files to import from Theme.ts instead of hardcoding\n\nThis prevents inconsistencies and makes visual tweaking much faster.\n\nFiles: Create src/config/Theme.ts, update all entity files","status":"closed","priority":1,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:04:23.532049-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:27:35.09377-05:00","closed_at":"2026-02-01T10:27:35.09377-05:00","close_reason":"Implemented in blitz-rushhour-44t"}
{"id":"rushhour-d5g","title":"Implement proper depth sorting across all entities","description":"Ensure consistent depth ordering across all game objects:\n1. Background (depth 0)\n2. Roads/Intersections (depth 1-2)\n3. Tire tracks/road decals (depth 3)\n4. Shadows (depth 4)\n5. Vehicles (depth 5-10)\n6. Snow/weather particles (depth 50)\n7. UI/Vignette (depth 100)\n\nReview and update setDepth() calls in all entity files to match this hierarchy.\n\nFiles: All entity files, GameScene.ts","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:02:41.170425-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:35:29.531048-05:00","closed_at":"2026-02-01T10:35:29.531048-05:00","close_reason":"Implemented in blitz-rushhour-d5g","dependencies":[{"issue_id":"rushhour-d5g","depends_on_id":"rushhour-han","type":"blocks","created_at":"2026-02-01T10:04:49.356314-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-daw","title":"Improve intersection and depot rendering","description":"Enhance Intersection.ts:\n- Match intersection color to road asphalt (#33354a) for seamless blending\n- Add crosswalk stripes: 4-5 small white stripes perpendicular to road connections\n- Depot: Replace circle with 'garage' structure (rect with open door)\n- Add pulsing blue zone highlight circle around depot\n- Optional: Add decorative stop lights (black boxes with red/green circles) that toggle every 5 seconds\n\nFiles: src/entities/Intersection.ts","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:02:19.302545-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:42:46.637441-05:00","closed_at":"2026-02-01T10:42:46.637441-05:00","close_reason":"Implemented intersection rendering improvements: intersections now use PALETTE.ROAD_ASPHALT for seamless blending with roads, added crosswalk stripes at each road connection (4 white stripes perpendicular to road direction), and enhanced depot with cyan glow rings plus a building/garage icon","dependencies":[{"issue_id":"rushhour-daw","depends_on_id":"rushhour-d5g","type":"blocks","created_at":"2026-02-01T10:04:49.447497-05:00","created_by":"Rob Barry"}],"comments":[{"id":1,"issue_id":"rushhour-daw","author":"Rob Barry","text":"GEMINI REVIEW: Drawing crosswalks requires knowing the angle of connected roads. Currently Intersection only knows its own Node position. Need to pass RoadNetwork or list of connected Edges to the Intersection constructor so it can calculate where to draw the stripes.","created_at":"2026-02-01T15:04:29Z"}]}
{"id":"rushhour-evm","title":"Add vignette and bloom ambient effects","description":"Add atmospheric polish to GameScene.ts:\n- Vignette: Draw permanent overlay with radial gradient from transparent (center) to black (edges, alpha 0.6) to focus eye on city center\n- Bloom PostFX: If using Phaser 3.60+, enable bloom on camera (this.cameras.main.postFX.addBloom()) to make white snow and vehicle lights glow against dark background\n\nFiles: src/scenes/GameScene.ts (create method)","status":"closed","priority":3,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:02:34.227675-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:42:30.615985-05:00","closed_at":"2026-02-01T10:42:30.615985-05:00","close_reason":"Added vignette overlay with radial gradient (alpha 0-0.5 from center to edges, depth 75) and bloom PostFX on camera for snow glow. Both effects compile and build successfully.","dependencies":[{"issue_id":"rushhour-evm","depends_on_id":"rushhour-spn","type":"blocks","created_at":"2026-02-01T10:04:49.72279-05:00","created_by":"Rob Barry"}],"comments":[{"id":3,"issue_id":"rushhour-evm","author":"Rob Barry","text":"GEMINI REVIEW: PostFX won't work if game falls back to Canvas on older devices. Wrap the bloom call in a check: if (this.renderer.type === Phaser.WEBGL) { ... }","created_at":"2026-02-01T15:04:40Z"}]}
{"id":"rushhour-han","title":"Implement Cold Night color palette","description":"Replace current high-contrast colors with cohesive 'Cold Night' theme:\n- Background: Dark Slate Blue (#1a1c29)\n- Road Asphalt: Cool Gray (#33354a)\n- Road Markings: Faded Yellow (#fbbf24) center, Dim White (#94a3b8) edges\n- Snow: Bright White (#f8fafc) fresh, Blue-Gray White (#cbd5e1) packed\n- Lights: Warm White (#fef3c7) headlights, Bright Red (#ef4444) taillights, Amber (#f59e0b) plow warning, Cyan (#0ea5e9) depot glow\n\nUpdate GameScene.ts background and all entity color constants.","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:01:31.450611-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:33:48.903541-05:00","closed_at":"2026-02-01T10:33:48.903541-05:00","close_reason":"Already implemented as part of rushhour-44t - Cold Night palette is in Theme.ts and all entities use it","dependencies":[{"issue_id":"rushhour-han","depends_on_id":"rushhour-44t","type":"blocks","created_at":"2026-02-01T10:04:49.30927-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-o4g","title":"Implement snowbank accumulation effect on roads","description":"Replace simple white overlay with realistic snowbank polygons:\n- Calculate snowWidth based on snow level growing inward from road edges\n- Draw irregular white polygons on left/right edges of road\n- Use Math.sin(distance * frequency) for wavy/rough snow edges\n- Create helper function createSnowBankPolygon() for jagged edge generation\n\nThis creates a 'tunnel' effect where snow narrows the drivable road area.\n\nFiles: src/entities/Road.ts","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:01:44.847541-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:45:30.80578-05:00","closed_at":"2026-02-01T10:45:30.80578-05:00","close_reason":"implemented snowbank accumulation effect - semi-circular shapes along road edges that increase in size, frequency, and opacity with snow level","dependencies":[{"issue_id":"rushhour-o4g","depends_on_id":"rushhour-szh","type":"blocks","created_at":"2026-02-01T10:04:49.494247-05:00","created_by":"Rob Barry"}],"comments":[{"id":2,"issue_id":"rushhour-o4g","author":"Rob Barry","text":"GEMINI REVIEW: Performance concern - generating random rough polygons every frame in update() could be expensive. Cache the snowbank polygon and only regenerate when the snow level integer changes (prevSnowLevel !== currentSnowLevel), not on every render tick.","created_at":"2026-02-01T15:04:35Z"}]}
{"id":"rushhour-o7h","title":"Polish HUD with panels and better typography","description":"Make HUD look like a 'Traffic Control System':\n- Create container with RoundedRect background (#0f172a, alpha 0.85) and thin border (#334155)\n- Typography improvements:\n  - Title: Bold, Large (24px), White\n  - Labels: Small, Uppercase, color #94a3b8\n  - Values: Monospace font for scores/stats (technical look)\n- Add simple procedural icons next to stats (triangle for plows, cross for rescued, etc.)\n\nFiles: src/scenes/GameScene.ts (HUD creation and updateHUD method)","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:02:27.773431-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:36:12.10287-05:00","closed_at":"2026-02-01T10:36:12.10287-05:00","close_reason":"Implemented in blitz-rushhour-o7h","dependencies":[{"issue_id":"rushhour-o7h","depends_on_id":"rushhour-han","type":"blocks","created_at":"2026-02-01T10:04:49.767794-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-qku","title":"Add vehicle shadows and improved car rendering","description":"Enhance Car.ts with better visuals:\n- Add shadow: rounded rect (0x000000, alpha 0.4) offset by (2,2) pixels below car\n- Draw layered car body: base rounded rect (14x8) + smaller darker roof/cabin (8x6)\n- Add dark blue-black windshield rect on roof\n- Add headlight cones: two yellow triangles in front, alpha 0.3, BlendModes.ADD\n- Add taillights: two small red rectangles at back\n- When stuck: draw small white circle on hood for snow build-up\n\nFiles: src/entities/Car.ts","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:01:52.490758-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:42:07.987843-05:00","closed_at":"2026-02-01T10:42:07.987843-05:00","close_reason":"Added shadows and improved car rendering: shadow (rounded rect, black, alpha 0.4) offset by (2,2) drawn before car body; layered car body with base (14x8) + darker roof/cabin (8x6)","dependencies":[{"issue_id":"rushhour-qku","depends_on_id":"rushhour-d5g","type":"blocks","created_at":"2026-02-01T10:04:49.539093-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-spn","title":"Enhance snow particle system with depth and wind","description":"Improve snow particles in GameScene.ts:\n- Create 3 distinct particle textures: small dot (1px), medium soft circle (3px), large blurry circle (6px)\n- Emit with different scroll factors/speeds for parallax depth effect\n- Add gravityX: 10 to simulate wind\n- Vary particle speeds and lifespans for more natural feel\n\nFiles: src/scenes/GameScene.ts (createSnowParticles method)","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:02:06.302178-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:35:14.175328-05:00","closed_at":"2026-02-01T10:35:14.175328-05:00","close_reason":"Implemented in blitz-rushhour-spn","dependencies":[{"issue_id":"rushhour-spn","depends_on_id":"rushhour-han","type":"blocks","created_at":"2026-02-01T10:04:49.676591-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-szh","title":"Improve road rendering with layers and dashed lines","description":"Enhance Road.ts with layered rendering:\n- Draw 28px shoulder layer first, then 24px asphalt on top\n- Use graphics.setLineDash([8, 8]) for dashed center yellow line\n- Add solid white edge lines (1px) at ±10px offset from center\n- Consider adding noise texture overlay (low alpha) for asphalt grain\n\nFiles: src/entities/Road.ts","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:01:38.063701-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:42:24.869485-05:00","closed_at":"2026-02-01T10:42:24.869485-05:00","close_reason":"Added layered road rendering: 28px shoulder base, 24px asphalt on top, dashed yellow center line (8px dash/gap pattern), and solid white edge lines at ±10px offset","dependencies":[{"issue_id":"rushhour-szh","depends_on_id":"rushhour-d5g","type":"blocks","created_at":"2026-02-01T10:04:49.400777-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-u0c","title":"Improve plow rendering with blade and rotating beacon","description":"Enhance Plow.ts with better visuals:\n- Add shadow like cars\n- Draw metallic gray (#94a3b8) curved blade (arc or trapezoid) at front, distinct from truck body\n- Replace flashing circle with rotating beacon: draw cone of orange light that rotates around roof center\n- Add depth with layered body similar to cars\n\nFiles: src/entities/Plow.ts","status":"closed","priority":2,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:01:59.38013-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:42:35.183604-05:00","closed_at":"2026-02-01T10:42:35.183604-05:00","close_reason":"Added shadow (0x000000, alpha 0.4, offset 2,2), metallic gray curved blade (0x94a3b8) with trapezoid shape and arc highlight, and rotating amber beacon with time-based glow animation. Draw order: shadow, blade, truck body, beacon.","dependencies":[{"issue_id":"rushhour-u0c","depends_on_id":"rushhour-d5g","type":"blocks","created_at":"2026-02-01T10:04:49.585757-05:00","created_by":"Rob Barry"}]}
{"id":"rushhour-z9n","title":"Add plow snow spray effect","description":"Add visual feedback when plow clears snow:\n- Create secondary particle emitter attached to plow's blade position\n- Emit small white particles flying perpendicular to movement direction\n- Only emit when plow is moving (speed \u003e 0) and on snowy road\n- Particles should arc sideways simulating snow being thrown\n\nFiles: src/entities/Plow.ts, src/scenes/GameScene.ts","status":"closed","priority":3,"issue_type":"task","owner":"rob.barry@wsj.com","created_at":"2026-02-01T10:02:12.540787-05:00","created_by":"Rob Barry","updated_at":"2026-02-01T10:45:59.997244-05:00","closed_at":"2026-02-01T10:45:59.997244-05:00","close_reason":"Added snow spray particle effect to plow. When plow moves and clears snow (edge.snow \u003e 0), white triangle particles spray off the blade at an angle from direction of travel. Particle count scales with snow level. Effect is subtle but shows the plow is working.","dependencies":[{"issue_id":"rushhour-z9n","depends_on_id":"rushhour-u0c","type":"blocks","created_at":"2026-02-01T10:04:49.631767-05:00","created_by":"Rob Barry"}]}
